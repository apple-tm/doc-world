# ZAB



#### 基本模式

1. 崩溃恢复
2. 消息广播



#### 崩溃恢复

1. 触发时机
   1.  Zookeeper 集群刚刚启动
   2. Leader服务器宕机
   3. 网络故障导致不存在过半的服务器与 Leader 服务器保持正常通信
2. 作用
   1. 选举产生新的 Leader 服务器
   2. leader 选举后集群中 Follower 服务器开始与新的 Leader 服务器进行数据同步



#### 消息广播

1. 触发时机：集群中超过**半数机器与该 Leader 服务器完成数据同步之后**
2. 作用：Leader 服务器开始接收客户端的事务请求生成事物提案（超过半数同意）来进行事务请求处理

