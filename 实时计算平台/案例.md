# poc报告



#### 背景说明

双十二计划做实时指标处理，poc 验证是否满足双十二指标准确性和时效性

数据流程：

业务系统（Oracle）--- FlinkSQL采集 -- Kafka数据集成+Flink 实时计算 --- 落库到 MSQL、HBASE、PG、kafka -- 前端图表



| 表名 | 每秒峰值 | 总数据量 | 操作   | 备注 |
| ---- | -------- | -------- | ------ | ---- |
| t1   | 210      | 45W      | update |      |
| t2   | 290      | 61W      | insert |      |
| t3   | 210      | 20W      | insert |      |



#### 测试方案

按不同数据量、不同计算资源、不同并发、不同结果库进行测试



#### 测试目的

1. 为指标提供参考
2. 为资源评估提供参考



#### 物理部署架构



Oracle --- kafka 集群 OGG 同步 --- 计算平台 -- 结果库



#### 环境信息

#### 测试过程

1. 案例：指定任务每秒生成 2W 条数据到 kafka 集群，数据总量 75W，测试在不同资源和不同数据量的条件下的执行效率

2. 时效



#### 资源预算

#### 测试结果

1. 结果库性能 MySQL > pg > hbase
2. Mysql 可以满足需求



#### 风险点

1. Ogg 数据同步到 kafka 数据延迟大，需要及时告警数据延迟问题
2. kafka 和 Oracle 跨机房带宽延迟，建议同机房部署