# 库存



#### 库存预警

1. 需求
   1. 商品表新增字段：商品预警数量（alarm_num）、预警标识(alarm_flag 0 标识库存正常，1 标识库存预警需要提醒商家进货)
   2. 定时任务：每天18 点定时查询对比每个商品的剩余数量和预警数量的大小，如果预警数量>剩余数量,那么将该商品的库存预警标识设置为 1（后续开发，商家登录系统时，查询商家的商品，判断哪些商品有库存预警，返回给前端，告知商家用户哪些需要进货）
   3. 商品批量上传后，商品的库存增加后刷新剩余数量，当天的 18 点会执行定时任务，刷新库存预警标识





#### 角色管理

1. 新增：

   1. 后端接口
      1. 入参：新增菜单 list，每个菜单包含菜单 ID，菜单 code
      2. service层：角色添加成功后返回 自增ID，新建一个角色菜单（权限）关联表的实体 List，每个对象组装（角色自增 ID，菜单 code（就是 permissionValue 字段），其他字段），mapper层，foreach 插入

   2. 前端
      1. 新增 model添加一个 checkbox，绑定点击事件，参数为 for 的当前对象，使用 Vue for 标签渲染（list 是菜单全部数据）
      2. data()中添加一个数组 保存选中的 checkbox的值，取消选择删除数组中的值
      3. 组装2点的数组，每个对象（菜单的 ID，菜单的 code），添加到 axios的参数角色对象中，对应后端的对象
