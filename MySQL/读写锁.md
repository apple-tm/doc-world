# 读写锁



#### 概念

1. 读锁是共享的
2. 写锁是独占（排他）的，一个写锁和阻塞其他的写锁和读锁



#### 设计

1. 原则： 只对会被修改的数据片段进行精确锁定，记住锁定的数据量越小，系统的并发度越高
2. 加锁消耗系统资源：获取锁、检查锁和释放锁
3. 一般加锁：施加行级锁（row-level lock）



#### 表锁（table Lock）

1. 原理： 望文生义，锁定整张表，进行写操作，阻塞其他用户对该表所有的读写操作，读锁之间不会相互阻塞
2. 实例： 服务器会对 ALTER TABLE 等操作使用表锁，对表结构进行修改服务器自动选择表锁



#### 行级锁（row lock）

1. 最大并发锁，同时也是最大消耗锁
2. InnoDB 实现了 row lock